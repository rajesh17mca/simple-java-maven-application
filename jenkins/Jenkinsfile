pipeline {
  agent any
  // agent NONE
  // agent {
  //   label 'DevServer'
  // }

  environment {
    NAME = "Rajesh"
    ENV = "PROD"
  }

  tools {
    maven 'Maven'
  }

  triggers {
    githubPush()
  }

  parameters {
    string defaultValue: 'Rajesh', description: 'Default param value', name: 'Name'
  }

  options {
    retry(5)
    timeout(time: 30, unit: 'SECONDS')
  }

  stages {
    stage('build') {
      steps {
        echo "This is Build stage in $ENV"
        // sh 'mvn clean package'
      }

      // post {
      //   success {
      //     archiveArtifacts artifacts: '**/target/*.war'
      //   }
      // }
    }

    stage('test') {
      steps {
        echo "This is Testing stage by $NAME"
      }
    }

    stage ('deploy') {
      steps {
        echo "Thhis is Deploy stage ${params.Name}"
      }
    }
  }
}